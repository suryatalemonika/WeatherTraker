<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <!-- Input field and button for entering location -->
        <div class="location-input">
            <input type="text" id="location-input" placeholder="Enter location" class="input-field">
            <button id="get-weather-btn" class="get-weather-btn">Get Weather</button>
        </div>
        <br>

        <!-- Weather widget (hidden by default) -->
        <div class="weather-widget" id="weather-widget" style="display: none;">
            <div class="weather-info">
                <h3 style="text-align: center;" class="heading">Today</h3>
                <br>
                <div class="temperature-container">
                    <img id="weather-icon" src="" alt="Weather Icon" class="weather-icon">
                    <h1 class="temperature" id="temp">--°C</h1>
                </div>
                <br>
                <p class="description" id="description">--</p>
                <br>
                <p class="location" id="location">--</p>
                <br>
                <p class="date" id="date">21 Oct 2024</p>
                <br>
                <p class="feels-like" id="feels_like">Feels like -- | Sunset: --</p>
                <br>
            </div>
        </div>
    </div>


    <script>
        document.getElementById('get-weather-btn').addEventListener('click', function () {
            const location = document.getElementById('location-input').value;
            if (location) {
                fetchWeatherData(location);
            } else {
                alert('Please enter a location!');
            }
        });
        function fetchWeatherData(location) {
            fetch(`/weather?location=${location}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('temp').textContent = `${data.Current_temp}°C`;
                    document.getElementById('description').textContent = data.Weather_description;
                    document.getElementById('weather-icon').src = `http://openweathermap.org/img/wn/${data.Whether_icon}.png`;
                    document.getElementById('feels_like').textContent = `Feels like ${data.feels_like} | Sunset ${data.sunset}`;
                    document.getElementById('location').textContent = data.location;

                    document.getElementById('weather-widget').style.display = 'block';
                })
                .catch(error => {
                    console.error('Error fetching the weather data:', error);
                });
        }

    </script>
</body>

</html>